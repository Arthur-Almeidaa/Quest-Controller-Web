<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quest Controller – Painel</title>
  <link rel="shortcut icon" href="icon.png" type="image/x-icon">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="painel.css">
</head>

<body>
  <div class="container">

    <!-- HEADER -->
    <header class="header">
      <div class="header-left">
        <div class="logo">
          <svg class="logo-svg" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect x="2" y="7" width="20" height="10" rx="3" stroke="currentColor" stroke-width="1.5"/>
            <circle cx="8" cy="12" r="1.5" fill="currentColor"/>
            <circle cx="16" cy="12" r="1.5" fill="currentColor"/>
            <line x1="12" y1="10" x2="12" y2="14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            <line x1="10" y1="12" x2="14" y2="12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
          </svg>
          Quest Controller
        </div>
        <div class="logo-subtitle" id="userSubtitle">Meus Dispositivos</div>
      </div>

      <div class="stats">
        <div class="stat-item">
          <div class="stat-value" id="totalDevices">0</div>
          <div class="stat-label">Dispositivos</div>
        </div>
        <div class="stat-item">
          <div class="stat-value" id="onlineDevices">0</div>
          <div class="stat-label">Online</div>
        </div>
        <div class="stat-item stat-action" id="btnOpenLogs">
          <div class="stat-value stat-icon-value">
            <svg viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M4 4h12v2H4V4zm0 4h12v2H4V8zm0 4h8v2H4v-2z" fill="currentColor"/>
              <rect x="2" y="2" width="16" height="16" rx="2" stroke="currentColor" stroke-width="1.5" fill="none"/>
            </svg>
            <span class="notification-badge" id="unreadLogsCount" style="display:none;">0</span>
          </div>
          <div class="stat-label">Histórico</div>
        </div>
        <div class="stat-item stat-action" id="btnLogout" title="Sair da sessão">
          <div class="stat-value stat-icon-value">
            <svg viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M13 3h4a1 1 0 011 1v12a1 1 0 01-1 1h-4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
              <path d="M9 14l4-4-4-4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              <line x1="3" y1="10" x2="13" y2="10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            </svg>
          </div>
          <div class="stat-label" id="loggedUserName">Sair</div>
        </div>
      </div>
    </header>

    <!-- CONTEÚDO PRINCIPAL -->
    <div class="tab-content active">
      <div class="action-bar">
        <div class="action-bar-left">
          <select class="form-select" id="deviceAppSelect">
            <option value="">Selecionar Aplicativo</option>
          </select>
          <button class="btn btn-primary" id="btnExecuteSelected">
            <svg viewBox="0 0 16 16" fill="none"><path d="M4 2l10 6-10 6V2z" fill="currentColor"/></svg>
            Executar Selecionados
          </button>
        </div>

        <div class="action-bar-right">
          <button class="btn btn-secondary" id="btnToggleApps">
            <svg id="toggleAppsIconSvg" viewBox="0 0 16 16" fill="none"><path d="M1 8s3-5 7-5 7 5 7 5-3 5-7 5-7-5-7-5z" stroke="currentColor" stroke-width="1.4"/><circle cx="8" cy="8" r="2" stroke="currentColor" stroke-width="1.4"/></svg>
            <span id="toggleAppsText">Ocultar Apps</span>
          </button>
          <button class="btn btn-secondary" id="btnSelectAll">
            <svg viewBox="0 0 16 16" fill="none"><rect x="2" y="2" width="12" height="12" rx="2" stroke="currentColor" stroke-width="1.4"/><path d="M5 8l2.5 2.5L11 5" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/></svg>
            Selecionar Todos
          </button>
          <button class="btn btn-secondary" id="btnDeselectAll">
            <svg viewBox="0 0 16 16" fill="none"><rect x="2" y="2" width="12" height="12" rx="2" stroke="currentColor" stroke-width="1.4"/><path d="M5 5l6 6M11 5l-6 6" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"/></svg>
            Limpar Seleção
          </button>
        </div>
      </div>

      <div id="devicesGrid" class="devices-grid"></div>
    </div>
  </div>

  <!-- MODAL: LOGS -->
  <div id="logsModal" class="modal">
    <div class="modal-content modal-logs">
      <div class="modal-header">
        <h2>Histórico de Comandos</h2>
        <div class="logs-header-actions">
          <button class="modal-close" id="btnCloseLogsModal" aria-label="Fechar">&times;</button>
        </div>
      </div>
      <div class="modal-body">
        <div class="logs-filters">
          <select id="logFilterStatus" class="form-select">
            <option value="all">Todos os Status</option>
            <option value="success">Sucesso</option>
            <option value="error">Erro</option>
            <option value="pending">Aguardando</option>
            <option value="timeout">Timeout</option>
          </select>
          <select id="logFilterDevice" class="form-select">
            <option value="all">Todos os Dispositivos</option>
          </select>
        </div>
        <div id="logsContainer" class="logs-list"></div>
      </div>
    </div>
  </div>

  <!-- TOAST NOTIFICATIONS -->
  <div id="toastContainer" class="toast-container"></div>

  <!-- JS -->
  <script type="module" src="user-panel.js"></script>
</body>
</html>